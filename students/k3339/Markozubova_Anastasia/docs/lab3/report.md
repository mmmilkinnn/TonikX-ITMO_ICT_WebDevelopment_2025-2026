# Лабораторная работа №3  
## Реализация серверной части приложения средствами Django и Django REST Framework

## Описание проекта

В рамках лабораторной работы №3 был разработан серверный REST API для системы управления гостиницей с использованием фреймворков **Django** и **Django REST Framework**.

Разработанный API позволяет выполнять управление основными сущностями гостиницы: этажами, номерами, клиентами, записями о проживании, сотрудниками и уборками. Система предназначена для автоматизации учёта проживания клиентов, организации графиков уборки и получения аналитической информации по работе гостиницы.

Проект реализован в виде backend-приложения и ориентирован на работу с REST-запросами в формате JSON.

## Модель данных

Модель базы данных реализована средствами **Django ORM** и включает следующие сущности:

- **Floor (Этаж)** — хранит информацию об этажах гостиницы.
- **Room (Номер)** — описывает номера гостиницы, связанные с конкретным этажом.
- **Client (Клиент)** — содержит данные о клиентах, проживающих в гостинице.
- **StayRecord (Запись о проживании)** — фиксирует факты проживания клиентов в номерах с указанием дат заезда и выезда.
- **Employee (Сотрудник)** — представляет сотрудников гостиницы.
- **CleaningSchedule (График уборки)** — определяет, какой сотрудник отвечает за уборку определённого этажа в конкретный день недели.
- **CleaningRecord (Запись об уборке)** — хранит информацию о фактически выполненных уборках.

### Связи между сущностями

- один этаж — много номеров  
- один клиент — много записей о проживании  
- один номер — много записей о проживании  
- один сотрудник — много графиков уборки  
- один график уборки — много записей об уборке  

Все связи реализованы с помощью `ForeignKey`, что соответствует модели связей «один-ко-многим».



## Реализация REST API

Для реализации API использован **Django REST Framework**.  
Для каждой модели был создан сериализатор на основе `ModelSerializer` и представление на основе `ModelViewSet`.

Это позволило автоматически реализовать **CRUD-операции** (Create, Read, Update, Delete) для всех сущностей системы.



## API эндпоинты

### Управление этажами

- `GET /api/floors/` — получить список этажей  
- `POST /api/floors/` — создать этаж  
- `GET /api/floors/{id}/` — получить этаж по идентификатору  
- `PUT /api/floors/{id}/` — обновить этаж  
- `DELETE /api/floors/{id}/` — удалить этаж  



### Управление номерами

- `GET /api/rooms/` — получить список номеров  
- `POST /api/rooms/` — создать номер  
- `GET /api/rooms/{id}/` — получить номер  
- `PUT /api/rooms/{id}/` — обновить номер  
- `DELETE /api/rooms/{id}/` — удалить номер  



### Управление клиентами

- `GET /api/clients/` — получить список клиентов  
- `POST /api/clients/` — создать клиента  
- `GET /api/clients/{id}/` — получить клиента  
- `PUT /api/clients/{id}/` — обновить клиента  
- `DELETE /api/clients/{id}/` — удалить клиента  



### Управление записями о проживании

- `GET /api/stay-records/` — список записей о проживании  
- `POST /api/stay-records/` — создать запись  
- `GET /api/stay-records/{id}/` — получить запись  
- `PUT /api/stay-records/{id}/` — обновить запись  
- `DELETE /api/stay-records/{id}/` — удалить запись  



### Управление сотрудниками

- `GET /api/employees/` — список сотрудников  
- `POST /api/employees/` — создать сотрудника  
- `GET /api/employees/{id}/` — получить сотрудника  
- `PUT /api/employees/{id}/` — обновить сотрудника  
- `DELETE /api/employees/{id}/` — удалить сотрудника  


### Управление графиками уборки

- `GET /api/cleaning-schedules/`  
- `POST /api/cleaning-schedules/`  
- `GET /api/cleaning-schedules/{id}/`  
- `PUT /api/cleaning-schedules/{id}/`  
- `DELETE /api/cleaning-schedules/{id}/`  


### Управление записями об уборке

- `GET /api/cleaning-records/`  
- `POST /api/cleaning-records/`  
- `GET /api/cleaning-records/{id}/`  
- `PUT /api/cleaning-records/{id}/`  
- `DELETE /api/cleaning-records/{id}/`  



## Аналитические и дополнительные запросы

В рамках лабораторной работы также реализованы аналитические запросы с использованием агрегаций Django ORM (`annotate`, `Count`):

- статистика использования номеров (количество проживаний по каждому номеру);
- анализ активности клиентов (количество проживаний у каждого клиента);
- получение количества свободных номеров;
- формирование агрегированного отчёта по гостинице за заданный период.

Аналитические запросы реализованы как отдельные эндпоинты внутри ViewSet’ов с использованием декоратора `@action`.



## Аутентификация и доступ

Доступ к API может быть ограничен с использованием стандартных механизмов аутентификации Django REST Framework.  
Для защиты эндпоинтов может применяться класс `IsAuthenticated`.


## Маршрутизация

Для маршрутизации API используется `DefaultRouter`, который автоматически регистрирует все ViewSet’ы:

```python
router = DefaultRouter()
router.register('floors', FloorViewSet)
router.register('rooms', RoomViewSet)
router.register('clients', ClientViewSet)
router.register('stay-records', StayRecordViewSet)
router.register('employees', EmployeeViewSet)
router.register('cleaning-schedules', CleaningScheduleViewSet)
router.register('cleaning-records', CleaningRecordViewSet)
```

Корневые маршруты приложения:

- `/admin/ — административная панель Django`
- `/api/ — REST API системы гостиницы`

## Вывод
В ходе выполнения лабораторной работы был разработан серверный REST API для системы управления гостиницей.
Проект демонстрирует использование Django ORM, Django REST Framework, CRUD-операций, связей между сущностями и аналитических запросов и соответствует требованиям лабораторной работы №3.

